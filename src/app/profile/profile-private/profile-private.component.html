<ngx-spinner>
    <p style="color: white; font-size: 14px;">
        <strong>{{ spinnerMsg }}</strong>
    </p>
</ngx-spinner>
<!-- <app-tabs [currTab]="'profile'"></app-tabs> -->
<div class='main-div'>
    <!-- <div class='view-friends-div'>
        <span class='view-friends-span' (click)="viewFriends()">
            View Friend List
        </span>
    </div> -->

    <div class='d-flex flex-row justify-content-end mt-1'>
        <select class="form-select form-select-sm " style="width: 95px;" aria-label=".form-select-sm"
                [ngModel]="languageInput" (ngModelChange)="onChangeLanguage($event)">
            <option value="en-US">English</option>
            <option value="ko-KR">한국어</option>
        </select>
    </div>

    <div class='profile-image-div'>
        <img [src]='profileImageUrl'
             (click)="toggleProfileImageUploader()"
             class='profile-img' onerror="this.src='/assets/user.png'"/>
    </div>

    <div *ngIf="profileImageUploaderOn" class='profile-image-upload-div'>
        <div class="d-flex flex-row justify-content-between align-items-center">
            <input class='file-input' type="file" (change)="onSelectFile($event)"/>
            <span *ngIf="imageSelectUrl !== ''" class='profile-image-action-span'
                  (click)="uploadProfileImage()">
                {{ 'upload' | translate }}
            </span>
            <span *ngIf="imageSelectUrl === ''" class='profile-image-action-span'
                  (click)="deleteProfileImage()">
                {{ 'delete' | translate }}
            </span>
        </div>
        <div *ngIf='imageUploadErrorMsg !== ""' class='error-div'>
            <span>* {{ imageUploadErrorMsg }}</span>
        </div>
    </div>

    <div class='preview-img-div' *ngIf="imageSelectUrl && profileImageUploaderOn">
        <img [src]="imageSelectUrl" class='preview-img'/>
    </div>

    <div class='section-header-div'>
        <span class='section-header-span'>
            <strong>{{ 'name' | translate }}</strong>
        </span>
        <span class='section-header-save-span' (click)="saveName()">
            {{ 'save' | translate }}
        </span>
    </div>

    <div class='d-flex justify-content-between align-items-center w-100'>
        <input [(ngModel)]='firstNameInput' placeholder="First Name" style="width: 49%;" />
        <input [(ngModel)]='lastNameInput' placeholder="Last Name" style="width: 49%;" />
    </div>

    <div *ngIf='nameErrorMsg !== ""' class='error-div'>
        <span>* {{ nameErrorMsg }}</span>
    </div>

    <div class='section-header-div'>
        <span class='section-header-span'>
            <strong>{{ 'profileHeader' | translate }}</strong>
        </span>
        <span class='section-header-save-span' (click)="saveDescription()">
            {{ 'save' | translate }}
        </span>
    </div>

    <div>
        <input class='d-block w-100' style="resize: none;"
               [(ngModel)]="descriptionInput" />
    </div>

    <div *ngIf='descriptionErrorMsg !== ""' class='error-div'>
        <span>* {{ descriptionErrorMsg }}</span>
    </div>

    <div class='section-header-div'>
        <span class='section-header-span'>
            <strong>{{ 'activityPrivacySettings' | translate }}</strong>
        </span>
        <span class='section-header-save-span' (click)="saveActivitySettings()">
            {{ 'save' | translate }}
        </span>
    </div>

    <div *ngIf="userLanguage !== LANG_KO" class='d-flex flex-row align-items-center mb-2'>
        <select class="form-select form-select-sm me-2" style="width: 95px;"
                [(ngModel)]="activitySettings" aria-label=".form-select-sm">
            <option value="share">Share</option>
            <option value="hide">Hide</option>
        </select>
        <span>activites on the following domains</span>
    </div>
    <div *ngIf="userLanguage === LANG_KO" class='d-flex flex-row align-items-center mb-2'>
        <span>아래 도메인에서의 활동을</span>
        <select class="form-select form-select-sm ms-2" style="width: 95px;"
                [(ngModel)]="activitySettings" aria-label=".form-select-sm">
            <option value="share">공개하기</option>
            <option value="hide">숨기기</option>
        </select>
    </div>

    <div class='domain-list-div'>
        <div *ngIf="activitySettings === 'hide'">
            <div *ngFor="let domain of domainDenyArr; let domainIdx=index" class='domain-div'>
                <span>{{ domain }}</span>
                <fa-icon [icon]="faMinus" class='minus-icon'
                         (click)="removeDomain(domainIdx)">
                </fa-icon>
            </div>
        </div>
        <div *ngIf="activitySettings === 'share'">
            <div *ngFor="let domain of domainAllowArr; let domainIdx=index" class='domain-div'>
                <span>{{ domain }}</span>
                <fa-icon [icon]="faMinus" class='minus-icon'
                         (click)="removeDomain(domainIdx)">
                </fa-icon>
            </div>
        </div>
    </div>

    <div class='d-flex flex-row align-items-center'>
        <input [(ngModel)]="domainInput" class='flex-grow-1 me-1' style="font-size: 15px;"
               placeholder="{{ 'domainInputPlaceholder' | translate }}"/>
        <span class='text-center' style="width: 45px;">
            <fa-icon class='domain-add-icon' [icon]="faPlus"
                 (click)="addDomain()">
            </fa-icon>
        </span>
    </div>

    <div class='domain-helper-div'>
        <span *ngIf="activitySettings === 'hide'">
            * {{ 'hideActivitiesMessage' | translate }}
        </span>
        <span *ngIf="activitySettings === 'share'">
            * {{ 'shareActivitiesMessage' | translate }}
        </span>
    </div>

    <div *ngIf='activitySettingsErrorMsg !== ""' class='error-div'>
        <span>* {{ activitySettingsErrorMsg }}</span>
    </div>

    <div class='section-header-div'>
        <span class='section-header-span'>
            <strong>{{ 'additionalInformation' | translate }}</strong>
        </span>
        <span class='section-header-save-span' (click)="saveAdditionalInfo()">
            {{ 'save' | translate }}
        </span>
    </div>

    <div class='additional-info-div'>
        <div class='info-div'>
            <div class='info-label'>{{ 'email' | translate }}</div>
            <input [(ngModel)]="emailInput" class='info-input'
                   disabled placeholder="Enter email" />
            <select class="form-select form-select-sm privacy-select"
                    [(ngModel)]="emailOption" aria-label=".form-select-sm">
                <option value="private">{{ 'private' | translate }}</option>
                <option value="public">{{ 'public' | translate }}</option>
            </select>
        </div>
        <div class='info-div'>
            <div class='info-label'>{{ 'gender' | translate }}</div>
            <input [(ngModel)]="genderInput" class='info-input'
                   placeholder="Enter gender" />
            <select class="form-select form-select-sm privacy-select"
                    [(ngModel)]="genderOption" aria-label=".form-select-sm">
                <option value="private">{{ 'private' | translate }}</option>
                <option value="public">{{ 'public' | translate }}</option>
            </select>
        </div>
        <div class='info-div'>
            <div class='info-label'>{{ 'school' | translate }}</div>
            <input [(ngModel)]="schoolInput" class='info-input'
                   placeholder="Enter school" />
            <select class="form-select form-select-sm privacy-select"
                    [(ngModel)]="schoolOption" aria-label=".form-select-sm">
                <option value="private">{{ 'private' | translate }}</option>
                <option value="public">{{ 'public' | translate }}</option>
            </select>
        </div>
        <div class='info-div'>
            <div class='info-label'>{{ 'work' | translate }}</div>
            <input [(ngModel)]="workInput" class='info-input'
                   placeholder="Enter work" />
            <select class="form-select form-select-sm privacy-select"
                    [(ngModel)]="workOption" aria-label=".form-select-sm">
                <option value="private">{{ 'private' | translate }}</option>
                <option value="public">{{ 'public' | translate }}</option>
            </select>
        </div>
        <div class='info-div'>
            <div class='info-label'>{{ 'location' | translate }}</div>
            <input [(ngModel)]="locationInput" class='info-input'
                   placeholder="Enter location" />
            <select class="form-select form-select-sm privacy-select"
                    [(ngModel)]="locationOption" aria-label=".form-select-sm">
                <option value="private">{{ 'private' | translate }}</option>
                <option value="public">{{ 'public' | translate }}</option>
            </select>
        </div>
    </div>

    <div *ngIf='additionalInfoErrorMsg !== ""' class='error-div'>
        <span>* {{ additionalInfoErrorMsg }}</span>
    </div>
</div>
<ngx-spinner>
    <p style="color: white;">
        <strong>{{ spinnerMsg }}</strong>
    </p>
</ngx-spinner>
<div class='main-div' *ngIf="!showProfile">
    <div *ngIf="userPresence && userPresence.page && userPresence.page.url !== ''" class='user-share-div'>
        <span class='user-sharing-intro-span'>
            Now sharing
        </span>
        <span class='user-sharing-url-span'>
            {{ userPresence.page.url }}
        </span>
    </div>
    <div *ngIf="(shareMode === 'default_all' && domainDenySet.has(currDomain)) || (shareMode === 'default_none' && !domainAllowSet.has(currDomain))"
        class='url-block-div'
    >
        Click <span class='click-span' (click)="allowCurrDomain()">here</span> to allow <strong>{{ currDomain }}</strong> to be shared
    </div>
    <div class='presence-div' *ngFor="let presence of presenceArr">
        <div class='profile-image-div'>
            <img [src]="userInfoMap[presence.userId].profileImgUrl"
                (click)="onClickProfile(presence.userId)"
                class="profile-image" onerror="this.src='/assets/user.png'">
        </div>
        <div class='presence-page-div'>
            <span class='user-name-span' (click)="onClickProfile(presence.userId)">
                {{ userInfoMap[presence.userId].first_name }}
                {{ userInfoMap[presence.userId].last_name }}
            </span>
            <a *ngIf="presence.page" [href]='presence.page.url' target="_blank" class='page-a'>
                {{ presence.page.domain }}: {{ presence.page.title }}
            </a>
            <span *ngIf="presence.page === null" class='offline-span'>
                Offline
            </span>
        </div>
    </div>

</div>
<app-profile-public *ngIf="showProfile" [userId]="profileId" (backEvent)="onClickBack()">
</app-profile-public>